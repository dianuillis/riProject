<?xml version="1.0" encoding="UTF-8"?>
<!-- generated by CLiX/Wiki2XML [MPI-Inf, MMCI@UdS] $LastChangedRevision: 92 $ on 17.04.2009 01:11:37[mciao0828] -->
<!DOCTYPE article SYSTEM "../article.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink">
<entity  confidence="0.9511911446218017" wordnetid="100001740">
<header>
<title>Mac OS nanokernel</title>
<id>12304643</id>
<revision>
<id>220489526</id>
<timestamp>2008-06-20T02:56:55Z</timestamp>
<contributor>
<username>GargoyleBot</username>
<id>6678853</id>
</contributor>
</revision>
<categories>
<category>Nanokernels</category>
</categories>
</header>
<bdy>

<link xlink:type="simple" xlink:href="../046/20046.xml">
Before Mac OS X</link>, <link xlink:type="simple" xlink:href="../281/24281.xml">
PowerPC</link> versions of the <b><link xlink:type="simple" xlink:href="../043/20043.xml">
Mac OS</link></b> were based on a <b><link>
nanokernel</link></b>, or extremely simple <link xlink:type="simple" xlink:href="../194/22194.xml">
operating system</link> <link xlink:type="simple" xlink:href="../394/50394.xml">
kernel</link>. The initial revision of this software is an extremely simple, single tasking system which delegates most tasks to an <link xlink:type="simple" xlink:href="../937/18943937.xml">
emulator</link> running the <link xlink:type="simple" xlink:href="../826/64826.xml">
Motorola 68K</link> version of the operating system. The second major revision supports <link xlink:type="simple" xlink:href="../126/20126.xml">
multitasking</link>, <link xlink:type="simple" xlink:href="../020/64020.xml">
multiprocessing</link>, and <link xlink:type="simple" xlink:href="../867/1324867.xml">
message passing</link>, and would be more properly called a <link xlink:type="simple" xlink:href="../023/20023.xml">
microkernel</link>. Unlike the 68K-derived Mac OS kernel running within it, the PowerPC kernel exists in a <link xlink:type="simple" xlink:href="../373/515373.xml">
protected memory</link> space and executes <link xlink:type="simple" xlink:href="../101/9101.xml">
device driver</link>s in <link xlink:type="simple" xlink:href="../467/93467.xml">
user mode</link>. The nanokernel is completely different from the <link xlink:type="simple" xlink:href="../520/532520.xml">
Copland OS</link> microkernel, although they were created in succession with similar goals.
<sec>
<st>
 System 7.1.2—Mac OS 8.5.1 </st>

<p>

The original <link>
nanokernel</link>, and the tightly integrated <physical_entity wordnetid="100001930" confidence="0.8">
<person wordnetid="100007846" confidence="0.8">
<copycat wordnetid="109964411" confidence="0.8">
<causal_agent wordnetid="100007347" confidence="0.8">
<link xlink:type="simple" xlink:href="../466/291466.xml">
Mac 68K emulator</link></causal_agent>
</copycat>
</person>
</physical_entity>
, were written by <link xlink:type="simple" xlink:href="../937/18943937.xml">
emulation</link> consultant Gary Davidian. Its main purpose was to allow the existing <link xlink:type="simple" xlink:href="../826/64826.xml">
Motorola 68K</link> version of the operating system to run on new hardware. As such, the "normal" state of the system was to be running 68K code. The operating system did little until activated by an <link xlink:type="simple" xlink:href="../289/15289.xml">
interrupt</link>, which would be quickly mapped to its 68K equivalent within the virtual machine.</p>
<p>

Other tasks may include switching back to PowerPC mode, if necessary, upon completion of the interrupt handler, and mapping the Macintosh <link xlink:type="simple" xlink:href="../354/32354.xml">
virtual memory</link> system to the PowerPC hardware. However, as the software is little documented, these might instead be handled by the emulator running in <link xlink:type="simple" xlink:href="../467/93467.xml">
user mode</link>.</p>
<p>

This nanokernel was stored on the Mac OS ROM <link xlink:type="simple" xlink:href="../934/18934934.xml">
chip</link> integrated into <link xlink:type="simple" xlink:href="../471/861471.xml">
Old World ROM</link> computers, or inside the Mac OS ROM file on disk on the <link xlink:type="simple" xlink:href="../454/861454.xml">
New World ROM</link> computers, rather than being installed in the familiar sense.</p>

</sec>
<sec>
<st>
 Interim development </st>

<p>

Progress after 1994 demanded additional functionality. A forward-looking architecture was introduced for <link xlink:type="simple" xlink:href="../075/24075.xml">
PCI</link> card drivers in anticipation of <link xlink:type="simple" xlink:href="../520/532520.xml">
Copland OS</link>, which supported <link xlink:type="simple" xlink:href="../373/515373.xml">
memory protection</link>. The <link xlink:type="simple" xlink:href="../805/376805.xml">
Open Transport</link> networking architecture introduced standardized PowerPC synchronization primitives. The <company wordnetid="108058098" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../068/4753068.xml">
DayStar Digital</link></company>
 Genesis MP <link xlink:type="simple" xlink:href="../625/1492625.xml">
Macintosh clone</link> required kernel extensions to support multiprocessing. This evolution would later affect the overhaul to the nanokernel in Mac OS 8.6.</p>

</sec>
<sec>
<st>
Mac OS 8.6 and later</st>
<p>

Mac OS 8.6's nanokernel was rewritten by René A. Vega to add <link>
Multiprocessing Services</link> 2.0 support. PowerMacInfo is an application that can display various info about this nanokernel.</p>

</sec>
<sec>
<st>
References</st>
<p>

<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://developer.apple.com/documentation/mac/PPCSoftware/PPCSoftware-12.html#HEADING12-0">
Inside Macintosh: PowerPC System Software</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://groups.google.ca/group/comp.sys.mac.programmer.help/browse_frm/thread/dcd2be8c07663aa8/e85a0fbc3072abb9?lnk=st&amp;q=Gary+nanokernel&amp;rnum=2&amp;hl=en#e85a0fbc3072abb9">
http://groups.google.ca/group/comp.sys.mac.programmer.help/browse_frm/thread/dcd2be8c07663aa8/e85a0fbc3072abb9?lnk=st&amp;q=Gary+nanokernel&amp;rnum=2&amp;hl=en#e85a0fbc3072abb9</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://groups.google.ca/group/comp.sys.mac.programmer.help/browse_frm/thread/b4ed22b933444c67/7aa9eef71c1f3ca1?lnk=st&amp;q=Gary+nanokernel&amp;rnum=1&amp;hl=en#7aa9eef71c1f3ca1">
http://groups.google.ca/group/comp.sys.mac.programmer.help/browse_frm/thread/b4ed22b933444c67/7aa9eef71c1f3ca1?lnk=st&amp;q=Gary+nanokernel&amp;rnum=1&amp;hl=en#7aa9eef71c1f3ca1</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://developer.apple.com/technotes/tn/tn1084.html">
TN1084: Running CFM-68K Code at Interrupt Time: Is Your Code at Risk?</weblink></entry>
</list>
</p>


</sec>
</bdy>
</entity>
</article>
