<?xml version="1.0" encoding="UTF-8"?>
<!-- generated by CLiX/Wiki2XML [MPI-Inf, MMCI@UdS] $LastChangedRevision: 92 $ on 16.04.2009 16:44:26[mciao0827] -->
<!DOCTYPE article SYSTEM "../article.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink">
<O  confidence="0.9508927676800064" wordnetid="106832680">
<header>
<title>DragonFly BSD</title>
<id>294229</id>
<revision>
<id>241541646</id>
<timestamp>2008-09-28T14:59:29Z</timestamp>
<contributor>
<username>Una Smith</username>
<id>3349439</id>
</contributor>
</revision>
<categories>
<category>Free software operating systems</category>
<category>BSD</category>
<category>Wikipedia articles needing clarification</category>
</categories>
</header>
<bdy>
<template>
<name>Infobox OS</name>
<parameters>
<ui>
<link xlink:type="simple" xlink:href="../947/95947.xml">
tcsh</link> (root) / <link xlink:type="simple" xlink:href="../947/95947.xml">
tcsh</link> (users)</ui>
<logo>
<image width="200px" src="DragonFly_BSD_Logo.png">
</image>
</logo>
<website>
<weblink xlink:type="simple" xlink:href="http://www.dragonflybsd.org/">
dragonflybsd.org</weblink></website>
<latest_release_version>
2.0.0</latest_release_version>
<latest_test_date>
ongoing</latest_test_date>
<latest_release_date>
2008-07-20; 270 days ago</latest_release_date>
<kernel_type>
<plant_part wordnetid="113086908" confidence="0.8">
<natural_object wordnetid="100019128" confidence="0.8">
<kernel wordnetid="113137010" confidence="0.8">
<link xlink:type="simple" xlink:href="../041/4345041.xml">
Hybrid kernel</link></kernel>
</natural_object>
</plant_part>
</kernel_type>
<working_state>
Current</working_state>
<developer>
<person wordnetid="100007846" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../519/428519.xml">
Matthew Dillon</link></person>
</developer>
<family>
<O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../622/18932622.xml">
BSD</link></O>
</family>
<latest_test_version>
2.1.0</latest_test_version>
<name>
DragonFly BSD</name>
<source_model>
<link xlink:type="simple" xlink:href="../758/18938758.xml">
Open source</link></source_model>
<license>
<link xlink:type="simple" xlink:href="../111/18933111.xml">
BSD</link></license>
</parameters>
</template>


<b>DragonFly BSD</b> is a <link xlink:type="simple" xlink:href="../635/10635.xml">
free</link> <family wordnetid="108078020" confidence="0.8">
<link xlink:type="simple" xlink:href="../815/31815.xml">
Unix-like</link></family>
 operating system created as a <link xlink:type="simple" xlink:href="../506/301506.xml">
fork</link> of <platform wordnetid="103961939" confidence="0.8">
<artifact wordnetid="100021939" confidence="0.8">
<surface wordnetid="104362025" confidence="0.8">
<horizontal_surface wordnetid="103536348" confidence="0.8">
<link xlink:type="simple" xlink:href="../554/7580554.xml">
FreeBSD</link></horizontal_surface>
</surface>
</artifact>
</platform>
 4.8.  <person wordnetid="100007846" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../519/428519.xml">
Matthew Dillon</link></person>
, a FreeBSD and <link xlink:type="simple" xlink:href="../980/1980.xml">
Amiga</link> developer since 1994, began work on DragonFly BSD in June 2003 and announced it on the FreeBSD mailing lists on July 16, 2003.<ref xlink:type="simple" xlink:href="#xpointer(//reflist/entry[@id=%221%22])">1</ref><p>

Dillon started DragonFly in the belief that the methods and techniques being adopted for <link>
threading</link> and <link xlink:type="simple" xlink:href="../318/50318.xml">
symmetric multiprocessing</link> in FreeBSD 5 would lead to a poorly performing system that would be very difficult to maintain. He sought to correct these suspected problems within the FreeBSD project. Due to ongoing conflicts with other FreeBSD developers over the implementation of his ideas, and other reasons, his ability to directly change the FreeBSD code was eventually revoked. Despite this, the DragonFly BSD and FreeBSD projects still work together contributing bug fixes, driver updates and other system improvements to each other.</p>
<p>

Intended to be <it>"the logical continuation of the FreeBSD 4.x series"</it>, DragonFly is being developed in an entirely different direction from FreeBSD 5, including a new <link xlink:type="simple" xlink:href="../060/417060.xml">
Light Weight Kernel Threads</link> (LWKT) implementation and a light weight ports/messaging system. Many concepts planned for DragonFly were inspired by <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../304/18933304.xml">
AmigaOS</link></O>
<ref xlink:type="simple" xlink:href="#xpointer(//reflist/entry[@id=%222%22])">2</ref><ref xlink:type="simple" xlink:href="#xpointer(//reflist/entry[@id=%223%22])">3</ref></p>

<sec>
<st>
 Kernel design </st>
<p>

Like most modern <link>
kernel</link>s, DragonFly is a <link xlink:type="simple" xlink:href="../041/4345041.xml">
hybrid</link>, containing features of both monolithic and microkernels, attempting to make the best use of both technologies, such as the message passing capability of microkernels enabling larger portions of the OS to benefit from <link xlink:type="simple" xlink:href="../373/515373.xml">
protected memory</link>, as well as retaining the speed of monolithic kernels for certain critical tasks. The messaging subsystem being developed is similar to those found in microkernels such as <link xlink:type="simple" xlink:href="../028/21028.xml">
Mach</link>, though it is less complex by design. DragonFly's messaging subsystem has the ability to act in either a synchronous or asynchronous fashion, and attempts to use this capability to achieve the best performance possible in any given situation.</p>
<p>

There is progress being made to provide both device <link xlink:type="simple" xlink:href="../558/14558.xml">
input/output</link> (<link xlink:type="simple" xlink:href="../558/14558.xml">
I/O</link>) and <link xlink:type="simple" xlink:href="../131/351131.xml">
virtual file system</link> (<link xlink:type="simple" xlink:href="../131/351131.xml">
VFS</link>) messaging capabilities that will allow the remainder of the project goals to be met. The new infrastructure will allow many parts of the kernel to be migrated out into userland, whereby they will be more easily debugged as they will be smaller, isolated programs, instead of being small parts entwined in a larger chunk of code. The migration of select kernel code into userspace has the additional benefit of making the system more robust; if a userspace driver crashes, it will not crash the kernel.</p>
<p>

<link xlink:type="simple" xlink:href="../908/102908.xml">
System call</link>s are being split into userland and kernel versions, as well as being encapsulated into messages. This will help reduce the size and complexity of the kernel by moving variants of standard system calls into a userland <link xlink:type="simple" xlink:href="../289/540289.xml">
compatibility layer</link>, as well as help maintain forwards and backwards compatibility between DragonFly versions. <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../297/6097297.xml">
Linux</link></O>
 and other <family wordnetid="108078020" confidence="0.8">
<link xlink:type="simple" xlink:href="../815/31815.xml">
Unix-like</link></family>
 OS compatibility code is being migrated out similarly. Multiple instances of the 'native' userland compatibility layer created in <link xlink:type="simple" xlink:href="../109/2469109.xml">
jails</link> could give DragonFly functionality similar to that found in <link xlink:type="simple" xlink:href="../697/373697.xml">
User Mode Linux</link> (UML). Unlike UML (which is essentially a port of Linux to itself as if the host kernel was a different hardware platform), DragonFly's virtualization will not require special drivers to communicate with the real hardware on the computer. </p>

<ss1>
<st>
 CPU localization </st>
<p>

In DragonFly, threads are locked to <link xlink:type="simple" xlink:href="../218/5218.xml">
CPUs</link> by design, and each processor has its own LWKT scheduler. Threads are never preemptively switched from one processor to another; they are only migrated by the passing of an "<link xlink:type="simple" xlink:href="../322/3280322.xml">
Interprocessor Interrupt</link>" (IPI) message between the CPUs involved. Interprocessor thread scheduling is also accomplished by sending asynchronous IPI messages. One advantage to this clean compartmentalization of the threading <link xlink:type="simple" xlink:href="../675/8286675.xml">
subsystem</link> is that the processors' on-board <link xlink:type="simple" xlink:href="../181/849181.xml">
caches</link> in SMP systems do not contain duplicated data, allowing for higher performance by giving each processor in the system the ability to use its own cache to store different things to work on. </p>
<p>

The LWKT subsystem is being employed to partition work among multiple kernel threads (for example in the networking code; one thread per protocol per processor), reducing contention by removing the need to share certain resources among various kernel tasks. This thread partitioning implementation of CPU localization algorithms is arguably the key differentiating feature of DragonFly's design. </p>

</ss1>
<ss1>
<st>
 Protecting shared resources </st>
<p>

In order to run safely on multiprocessor machines, access to shared resources (files, data structures etc.) must be serialized so that threads or processes do not attempt to modify the same resource at the same time. Atomic operations, <link xlink:type="simple" xlink:href="../603/244603.xml">
spinlock</link>s, <link>
critical sections</link>, <link xlink:type="simple" xlink:href="../827/36827.xml">
mutexes</link>, serializing tokens and message queues are all possible methods that can be used to prevent concurrent access. Whereas both Linux and FreeBSD 5 employ fine-grained mutex models to achieve higher performance on <link xlink:type="simple" xlink:href="../020/64020.xml">
multiprocessor</link> systems, DragonFly does not. In order to prevent multiple threads from accessing or modifying a shared resource simultaneously, DragonFly employs critical sections, and serializing tokens to prevent concurrent access. Until recently, DragonFly also employed <link xlink:type="simple" xlink:href="../732/670732.xml">
SPL</link>s, but these were replaced with critical sections. </p>
<p>

Much of the system's core including the LWKT subsystem, the IPI messaging subsystem and the new kernel memory allocator among other things are lockless, meaning that they work without using mutexes, and operate on a per-CPU basis. Critical sections are used to protect against local interrupts and operate on a per-CPU basis, guaranteeing that a thread currently being executed will not be preempted.</p>
<p>

<link xlink:type="simple" xlink:href="../222/666222.xml">
Serializing tokens</link> are used to prevent concurrent accesses from other CPUs and may be held simultaneously by multiple threads, ensuring that only one of those threads is running at any given time. Blocked or sleeping threads therefore do not prevent other threads from accessing the shared resource unlike a thread that is holding a mutex. Among other things, the use of serializing tokens prevents many of the situations that could result in <link xlink:type="simple" xlink:href="../181/105181.xml">
deadlock</link>s and <link xlink:type="simple" xlink:href="../507/521507.xml">
priority inversion</link>s when using mutexes, as well as greatly simplifying the design and implementation of a many-step procedure that would require a resource to be shared among multiple threads. The serializing token code is evolving into something quite similar to the "<link xlink:type="simple" xlink:href="../371/284371.xml">
Read-copy-update</link>" feature now available in Linux. Unlike Linux's current RCU implementation, DragonFly's is being implemented such that only processors competing for the same token are affected rather than all processors in the computer.</p>

</ss1>
<ss1>
<st>
 Additional features </st>
<p>

Early on in its development, DragonFly acquired a <link xlink:type="simple" xlink:href="../881/3926881.xml">
slab allocator</link>, which replaced the aging FreeBSD 4 kernel memory allocator. The new slab allocator requires neither mutexes nor blocking operations for memory assignment tasks and, unlike the code it replaced, is multiprocessor safe. </p>
<p>

DragonFly uses SFBUFs (Super-Fast BUFfers) and MSFBUFs (Multi-SFBUFs).  A SFBUF is used to manage ephemeral single-page mappings and cache them when appropriate.  They are used for retrieving a reference to data that is held by a single VM page.  This simple, yet powerful, abstraction gives a broad number of abilities, such as <link xlink:type="simple" xlink:href="../552/2342552.xml">
zero-copy</link> achieved in the sendfile(2) system call.</p>
<p>

SFBUFs are used in numerous parts of the kernel, such as the Vnode Object Pager and the <link xlink:type="simple" xlink:href="../117/1236117.xml">
PIPE</link> subsystems (indirectly via XIOs) for supporting high-bandwidth transfers.  An SFBUF can only be used for a <it>single</it> VM page; MSFBUFs are used for managing ephemeral mappings of multiple-pages.</p>
<p>

The SFBUF concept was devised by David Greenman of the FreeBSD Project when he wrote the sendfile(2) system call; it was later revised by Dr. Alan L. Cox and Matthew Dillon.  MSFBUFs were designed by Hiten Pandya and Matthew Dillon.</p>

</ss1>
</sec>
<sec>
<st>
 Development and distribution </st>
<p>

DragonFly forked from FreeBSD 4.8 and imports features and bug fixes from FreeBSD 4 and 5 where appropriate, such as <link xlink:type="simple" xlink:href="../697/2432697.xml">
ACPI</link> and a new <connection wordnetid="103091374" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../778/2778.xml">
ATA</link></connection>
 driver framework from FreeBSD 4. As the number of DragonFly developers is currently small, with most of them focused on implementing basic functionality, <link xlink:type="simple" xlink:href="../101/9101.xml">
device driver</link>s are being kept mostly in sync with FreeBSD 5.x, the branch of FreeBSD where all new drivers are being written. The DragonFly developers are slowly moving toward using the "<link xlink:type="simple" xlink:href="../670/590670.xml">
busdma</link>" <link xlink:type="simple" xlink:href="../ury/24th_century.xml">
API</link>s, which will help to make the system easier to port to new architectures, but it is not a major focus at this time.</p>
<p>

As with <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../571/18949571.xml">
OpenBSD</link></O>
, the developers of DragonFly BSD are actively replacing "<link>
K&amp;R</link>" style <programming_language wordnetid="106898352" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../021/6021.xml">
C</link></programming_language>
 code with more modern, <standard wordnetid="107260623" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../172/3172.xml">
ANSI</link></system_of_measurement>
</standard>
 equivalents. Also like OpenBSD, DragonFly's version of the <physical_entity wordnetid="100001930" confidence="0.8">
<communicator wordnetid="109610660" confidence="0.8">
<person wordnetid="100007846" confidence="0.8">
<compiler wordnetid="109946957" confidence="0.8">
<causal_agent wordnetid="100007347" confidence="0.8">
<writer wordnetid="110794014" confidence="0.8">
<link xlink:type="simple" xlink:href="../323/12323.xml">
GNU Compiler Collection</link></writer>
</causal_agent>
</compiler>
</person>
</communicator>
</physical_entity>
 has an enhancement called the "<link xlink:type="simple" xlink:href="../625/608625.xml">
Stack-Smashing Protector</link>" (formerly known as "ProPolice") enabled by default, providing some additional protection against <link xlink:type="simple" xlink:href="../373/4373.xml">
buffer overflow</link> based attacks. It should be noted that as of <link xlink:type="simple" xlink:href="../181/16181.xml">
July 23</link>, <link xlink:type="simple" xlink:href="../984/35984.xml">
2005</link>, the kernel &#91;&#93; is no longer built with this protection by default. </p>
<p>

Being a derivative of FreeBSD, DragonFly has inherited an easy-to-use integrated build system that can rebuild the entire base system from source with only a few commands. Like people from the other BSD projects, the DragonFly developers use a version control system called <software wordnetid="106566077" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../656/37656.xml">
CVS</link></software>
 to manage changes to the DragonFly <link xlink:type="simple" xlink:href="../661/27661.xml">
source code</link>. Unlike its parent FreeBSD, DragonFly will have both stable and unstable releases in a single source tree, due to a smaller developer base.</p>
<p>

Like the other BSD kernels (and those of most modern operating systems), DragonFly employs a built-in <link xlink:type="simple" xlink:href="../291/12576291.xml">
kernel debugger</link> to help the developers find kernel bugs. Furthermore, as of Wednesday, <link xlink:type="simple" xlink:href="../442/22442.xml">
October 20</link>, <link xlink:type="simple" xlink:href="../524/35524.xml">
2004</link>, a debug kernel, which makes bug reports more useful for tracking down kernel-related problems, is installed by default, at the expense of a relatively small quantity of disk space. When a new kernel is installed, the backup copy of the previous kernel and its modules are stripped of their debugging symbols to further minimize disk space usage. </p>
<p>

The operating system is distributed as a <structure wordnetid="105726345" confidence="0.8">
<arrangement wordnetid="105726596" confidence="0.8">
<distribution wordnetid="105729036" confidence="0.8">
<link xlink:type="simple" xlink:href="../137/331137.xml">
Live CD</link></distribution>
</arrangement>
</structure>
 that boots into a complete DragonFly system. It includes the base system and a complete set of manual pages, and may include source code and useful packages in future versions. The advantage of this is that with a single CD you can install the software onto a computer, use a full set of tools to repair a damaged installation, or demonstrate the capabilities of the system without installing it. Daily snapshots are available from Simon 'corecode' Schubert via <weblink xlink:type="simple" xlink:href="ftp://chlamydia.fs.ei.tum.de/pub/DragonFly/snapshots/i386/ISO-IMAGES/">
FTP</weblink> and <weblink xlink:type="simple" xlink:href="http://chlamydia.fs.ei.tum.de/pub/DragonFly/snapshots/i386/ISO-IMAGES/">
HTTP</weblink> for those who want to install the most recent versions of DragonFly without building from source. </p>
<p>

Like the other free, open source BSDs, DragonFly is distributed under the terms of the modern version of the <link xlink:type="simple" xlink:href="../111/18933111.xml">
BSD license</link>.</p>

</sec>
<sec>
<st>
 Releases </st>

<ss1>
<st>
 Version 1.0 </st>

<p>

DragonFly BSD 1.0, released <link xlink:type="simple" xlink:href="../971/15971.xml">
July 12</link>, <link xlink:type="simple" xlink:href="../524/35524.xml">
2004</link>,  was meant to be a "technology showcase" rather than an integrated production release. It featured the new "BSD Installer," the LWKT subsystem and the associated LW ports/messaging system, a mostly MP safe networking stack, lockless memory allocator and the FreeBSD 4.x ports and packages system (which was very briefly broken following the release). </p>
<p>

Amiga-style 'resident' application support was added which takes a snapshot of a large, dynamically linked program's <link>
virtual memory space</link> after loading, allowing future instances of the program to start much more quickly than it otherwise would have. This replaces the <link xlink:type="simple" xlink:href="../361/5082361.xml">
prelinking</link> capability that was being worked on earlier in the project's history, as the resident support is much more efficient. Large programs like those found in <software wordnetid="106566077" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../629/16629.xml">
KDE</link></software>
 with many <link xlink:type="simple" xlink:href="../421/106421.xml">
shared libraries</link> will benefit the most from this support.</p>
<p>

Other features introduced in this release include <link>
variant symlinks</link> and <link xlink:type="simple" xlink:href="../765/416765.xml">
application checkpointing</link> support.</p>
<p>

Due to a serious bug in the installer, an updated 1.0A release of DragonFly was released shortly afterward.</p>

</ss1>
<ss1>
<st>
 Version 1.2 </st>
<p>

This second release of DragonFly, on <link xlink:type="simple" xlink:href="../ury/23rd_century.xml">
April 8</link>, <link xlink:type="simple" xlink:href="../984/35984.xml">
2005</link>, contained many bug fixes and new features. <weblink xlink:type="simple" xlink:href="http://www.dragonflybsd.org/main/release1_2.cgi">
http://www.dragonflybsd.org/main/release1_2.cgi</weblink> New to this release were things such as TCP SACK, <link xlink:type="simple" xlink:href="../158/1671158.xml">
ALTQ</link> and <link xlink:type="simple" xlink:href="../396/352396.xml">
PF</link> (OpenBSD's firewall), TLS (<link xlink:type="simple" xlink:href="../638/1649638.xml">
thread-local storage</link>) support, DCONS support (console over firewire), <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<link xlink:type="simple" xlink:href="../318/15318.xml">
IPv6</link></rule>
</direction>
</protocol>
</message>
 improvements, and the rewritten namecache infrastructure, which is now distinct from the VFS code, and now capable of allowing the DragonFly developers to implement namecache based security mechanisms. </p>
<p>

Like the first release, 1.2 still utilizes the FreeBSD ports system for third party packages, but <link xlink:type="simple" xlink:href="../495/21495.xml">
NetBSD</link>'s "<link xlink:type="simple" xlink:href="../494/944494.xml">
pkgsrc</link>" now natively supports DragonFly, and is available as an option. </p>
<p>

Dillon has stated that this will be the last release of DragonFly that employs the MP lock in common code paths.</p>

</ss1>
<ss1>
<st>
 Version 1.4 </st>
<p>

The third release of DragonFly was made available on <link xlink:type="simple" xlink:href="../987/15987.xml">
January 7</link>, <link xlink:type="simple" xlink:href="../164/36164.xml">
2006</link>. Many new drivers and bug fixes have gone into the system. GCC version 3.4 is now required to build the system, and the older compiler suite will no longer work, due to the increasing use of TLS support. NetBSD's <link xlink:type="simple" xlink:href="../494/944494.xml">
pkgsrc</link> is now the default packaging system, although the buildtools are not yet included in DragonFly's CVS repository. So far, there is not an official set of prebuilt packages made specifically for this release, and many packages (KDE and GNOME most notably) in the current pkgsrc snapshot do not build cleanly on the system. <work wordnetid="100575741" confidence="0.8">
<event wordnetid="100029378" confidence="0.8">
<undertaking wordnetid="100795720" confidence="0.8">
<act wordnetid="100030358" confidence="0.8">
<psychological_feature wordnetid="100023100" confidence="0.8">
<activity wordnetid="100407535" confidence="0.8">
<link xlink:type="simple" xlink:href="../986/3675986.xml">
Citrus</link></activity>
</psychological_feature>
</act>
</undertaking>
</event>
</work>
 from the NetBSD project has also been imported.</p>

</ss1>
<ss1>
<st>
 Version 1.6 </st>
<p>

The fourth major release of DragonFly, on <link xlink:type="simple" xlink:href="../804/15804.xml">
July 25</link>, <link xlink:type="simple" xlink:href="../164/36164.xml">
2006</link>. The biggest user-visible changes in this release are a new random number generator, a massive reorganization of the 802.11 (wireless) framework, and extensive bug fixes in the kernel. Also made significant progress in pushing the big giant lock inward and made extensive modifications to the kernel infrastructure with an eye towards DragonFly's main clustering and userland VFS goals. DragonFly's team consider 1.6 to be more stable than 1.4.</p>

</ss1>
<ss1>
<st>
 Version 1.8 </st>
<p>

With the 1.8 release, DragonFly has improved several kernel features and has implemented a virtual kernel (similar to User Mode Linux or Linux KVM). Version 1.8.1 was released on <link xlink:type="simple" xlink:href="../585/20585.xml">
March 27</link>, <link xlink:type="simple" xlink:href="../165/36165.xml">
2007</link>, primarily to provide security updates and <invertebrate wordnetid="101905661" confidence="0.8">
<arthropod wordnetid="101767661" confidence="0.8">
<bug wordnetid="102236355" confidence="0.8">
<insect wordnetid="102159955" confidence="0.8">
<animal wordnetid="100015388" confidence="0.8">
<link xlink:type="simple" xlink:href="../085/37085.xml">
bugfixes</link></animal>
</insect>
</bug>
</arthropod>
</invertebrate>
, including to the dynamic loader and virtual kernel.<ref xlink:type="simple" xlink:href="#xpointer(//reflist/entry[@id=%224%22])">4</ref></p>

</ss1>
<ss1>
<st>
 Version 1.10 </st>

<p>

<link xlink:type="simple" xlink:href="../019/1019.xml">
August 06</link> <link xlink:type="simple" xlink:href="../165/36165.xml">
2007</link> saw the release of DragonFly 1.10. New to this release was the near completion of the new userland threading system, and native support (which was imported from FreeBSD) for the protocol used by <link xlink:type="simple" xlink:href="../151/174151.xml">
SATA</link> controllers. SMP support for virtual kernels was also enabled as a testbed for the various new multiprocessing features. Additionally many cleanups were done in the disk layer, many wireless drivers, and the USB subsystem. An example of what the improvements in the VFS layer in combination with the USB cleanups allow is that the system is much more stable and unlikely to panic if mounted USB media is suddenly removed. The old FreeBSD 4 derived ports system for installing third party applications was also finally retired. A fairly serious mbuf memory leak was discovered soon after the release and corrected, though there was not an immediate release of a new installation disk. The updated version 1.10.1 was released on <link xlink:type="simple" xlink:href="../012/1012.xml">
August 22</link><link xlink:type="simple" xlink:href="../165/36165.xml">
2007</link>, complete with fixes for the issues in 1.10.0.</p>

</ss1>
<ss1>
<st>
 Version 1.12 </st>

<p>

Released on <link xlink:type="simple" xlink:href="../141/11141.xml">
February 26</link> <link xlink:type="simple" xlink:href="../825/35825.xml">
2008</link>, DragonFly 1.12 was described as a maintenance update focusing mainly on code cleanups and updates; however, some user visible changes became available. The USB and WiFi stacks have been extensively worked on, increasing stability and supporting new hardware. The Hardware Sensors Framework originally developed for the OpenBSD Project has been imported (via FreeBSD). SATA ATAPI support for AHCI controllers is also featured. An experimental <computer wordnetid="103082979" confidence="0.8">
<artifact wordnetid="100021939" confidence="0.8">
<instrumentality wordnetid="103575240" confidence="0.8">
<standard wordnetid="107260623" confidence="0.8">
<device wordnetid="103183080" confidence="0.8">
<machine wordnetid="103699975" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../742/3742.xml">
Bluetooth</link></system_of_measurement>
</machine>
</device>
</standard>
</instrumentality>
</artifact>
</computer>
 stack is included for testing. The version of GCC used in DragonFly has been updated to version 4.1, with the older version available for those who want it. A first version of the DragonFly Mail Agent (called dma), intended to replace <link xlink:type="simple" xlink:href="../600/48600.xml">
sendmail</link> in the future, was added to the base. Older networking technologies such as ARCnet, FDDI and Token Ring support has been removed. Finally support for the <chip wordnetid="103020034" confidence="0.8">
<artifact wordnetid="100021939" confidence="0.8">
<instrumentality wordnetid="103575240" confidence="0.8">
<microprocessor wordnetid="103760310" confidence="0.8">
<conductor wordnetid="103088707" confidence="0.8">
<device wordnetid="103183080" confidence="0.8">
<semiconductor_device wordnetid="104171831" confidence="0.8">
<link xlink:type="simple" xlink:href="../070/15070.xml">
386</link></semiconductor_device>
</device>
</conductor>
</microprocessor>
</instrumentality>
</artifact>
</chip>
 CPU has been officially dropped.</p>
<p>

Also of note, supporting code for the AMD64 Architecture has been added, but the system still does not run in 64 bit mode. From the release notes: "Progress has been made on making more of the kernel MP safe. The network path has a good chance of getting there by the end of the year. The I/O path still needs a lot of work." Preliminary work on the new clustering file system (called <link xlink:type="simple" xlink:href="../843/17422843.xml">
HAMMER</link>).</p>

</ss1>
<ss1>
<st>
 Version 2.0 </st>

<p>

Released on <link xlink:type="simple" xlink:href="../179/16179.xml">
July 21</link> <link xlink:type="simple" xlink:href="../825/35825.xml">
2008</link>, DragonFly 2.0 includes several bug fixes, support for more devices, updated userland applications and, mainly, the first official release of the <link xlink:type="simple" xlink:href="../843/17422843.xml">
HAMMER</link> filesystem.</p>

</ss1>
</sec>
<sec>
<st>
 Future directions </st>

<ss1>
<st>
 Supported processors </st>
<p>

Currently, DragonFly runs on <link xlink:type="simple" xlink:href="../198/34198.xml">
x86</link> (<link xlink:type="simple" xlink:href="../617/14617.xml">
Intel</link> and <link xlink:type="simple" xlink:href="../ury/24th_century.xml">
AMD</link>) based computers, both single processor and <link xlink:type="simple" xlink:href="../318/50318.xml">
SMP</link> models. A port to the <link xlink:type="simple" xlink:href="../374/244374.xml">
x86-64</link> architecture has been started, but is not yet usable. A port to the <link xlink:type="simple" xlink:href="../281/24281.xml">
PowerPC</link> processor has been speculated about sometime following the eventual x86-64 port.</p>

</ss1>
<ss1>
<st>
 Package management </st>
<p>

DragonFly used to use FreeBSD's Ports system for third party software, with NetBSD's "<link xlink:type="simple" xlink:href="../494/944494.xml">
pkgsrc</link>" available as an option, but since the 1.4 release, pkgsrc <weblink xlink:type="simple" xlink:href="http://leaf.dragonflybsd.org/mailarchive/users/2005-08/msg00347.html">
http://leaf.dragonflybsd.org/mailarchive/users/2005-08/msg00347.html</weblink> is the official package management system. By supporting <link xlink:type="simple" xlink:href="../494/944494.xml">
pkgsrc</link>, the DragonFly developers are largely freed of having to maintain a large number of third party programs, while still having access to up to date applications. The pkgsrc developers also benefit from this arrangement as it helps to ensure the portability of the code.</p>

</ss1>
<ss1>
<st>
 Threading and messaging </st>
<p>

Although both system calls and device I/O have been largely converted to DragonFly's threaded messaging interface, both still operate synchronously. Ultimately, the entire messaging system is to be capable of both synchronous and asynchronous operation.</p>
<p>

Userland threading support is also a focus for upcoming releases. Currently, DragonFly has only basic userland threading support that does not take advantage of multiprocessor systems (N:1 threading). Work to address this has been ongoing almost since the inception of the project, and a modern implementation is expected for version 2.0. Matt has said that ideally, an M:N implementation is preferable (N userland threads making use of a smaller number of kernel threads (M)), but the support planned for 2.0 is likely going to be a 1:1 implementation (one kernel thread for every userland thread.)</p>

</ss1>
<ss1>
<st>
 Userland VFS and journaling </st>
<p>

Userland VFS - the ability to migrate filesystem drivers into userspace, will take a lot of work to accomplish. Some of this work is already complete, though there is still much to do. The namecache code has been extracted from and made independent of the VFS code, and converting the VFS code to DragonFly's threaded messaging interface is Matt's next major focus. This will be more difficult than converting the device I/O and system calls was, due to the fact that the VFS system inherited from FreeBSD uses a massively <link xlink:type="simple" xlink:href="../851/154851.xml">
reentrant</link> model. </p>
<p>

The userland VFS system is a prerequisite of a number of desired features to be incorporated into DragonFly. Dillon envisions a new package management system based at least in part, on "VFS environments" which give the packages the environment they expect to be in, independent of the larger filesystem environment and its quirks. In addition to system call message filtering, VFS environments are also to play a role in future security mechanisms, by restricting users or processes to their own isolated environments.</p>
<p>

A new journaling layer is being developed for DragonFly for the purpose of transparently backing up entire filesystems in real-time, securely over a network. What remains to be done is the ability to restore a filesystem to a previous state, as well as general stability enhancements. This differs from traditional meta-data journaling filesystems in two ways:  (1) it will work with all supported filesystems, as it is implemented in the VFS layer instead of in the individual filesystem drivers, and (2) it will back up all of the data contained on a disk or partition, instead of just meta-data, allowing for the recovery of even the most damaged of installations. </p>
<p>

While working on the journaling code, Dillon realized that the userland VFS he envisioned may be closer than he initially thought, though it is still some ways off.</p>

</ss1>
<ss1>
<st>
 SSI clustering </st>
<p>

Ultimately, <person wordnetid="100007846" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../519/428519.xml">
Dillon</link></person>
 wants DragonFly to natively enable <it>"secure anonymous system <link xlink:type="simple" xlink:href="../172/39172.xml">
clustering</link> over the <link xlink:type="simple" xlink:href="../539/14539.xml">
Internet</link>"</it>, and the light weight ports/messaging system will help to provide this capability. Security settings aside, there is technically no difference between messages created locally or on another computer over a network. Achieving this "<link xlink:type="simple" xlink:href="../962/622962.xml">
single-system image</link>" capability transparently will be a big job, and will take quite some time to properly implement, even with the new foundation fully in place.  While some of the short term goals of the project will be completed in months, other features may take years to complete.  SSI clustering will have applications in scientific computing.</p>

</ss1>
</sec>
<sec>
<st>
 See also </st>

<p>

<table style="background:#f9f9f9; font-size:85%; line-height:110%; ">
<row>
<col>
 <image width="32x28px" src="Free_Software_Portal_Logo.svg">
</image>
</col>
<col style="padding:0 0.2em;">
 <b><it>
Free software&#32;portal</it></b></col>
</row>
</table>
</p>
<p>

<list>
<entry level="1" type="bullet">

 <link xlink:type="simple" xlink:href="../169/4710169.xml">
Comparison of BSD operating systems</link></entry>
</list>
</p>

</sec>
<sec>
<st>
 References </st>

<p>

<reflist>
<entry id="1">
 Dillon, Matthew.&#32;(2003-07-16).&#32;"<weblink xlink:type="simple" xlink:href="http://lists.freebsd.org/pipermail/freebsd-current/2003-July/006889.html">
Announcing DragonFly BSD!</weblink>".&#32;Retrieved on <link>
2007-07-26</link>.</entry>
<entry id="2">
<weblink xlink:type="simple" xlink:href="http://leaf.dragonflybsd.org/mailarchive/kernel/2006-02/msg00087.html">
Re: User-Space Device Drivers</weblink>, <link xlink:type="simple" xlink:href="../794/3041794.xml">
Matthew Dillon</link>, Dragonfly Kernel mailing list, 28 February, 2006, accessed 1 February, 2008</entry>
<entry id="3">
<weblink xlink:type="simple" xlink:href="http://leaf.dragonflybsd.org/mailarchive/kernel/2003-07/msg00049.html">
Re: You could do worse than Mach ports</weblink>, <link xlink:type="simple" xlink:href="../794/3041794.xml">
Matthew Dillon</link>, Dragonfly Kernel mailing list, 17 July, 2003, accessed 1 February, 2008</entry>
<entry id="4">
Dillon, Matthew.&#32;"<weblink xlink:type="simple" xlink:href="http://www.dragonflybsd.org/community/release1_8.shtml">
Release Notes for DragonFly 1.8.1</weblink>".&#32;Retrieved on <link>
2007-03-27</link>.</entry>
</reflist>
</p>

</sec>
<sec>
<st>
 External links </st>


<ss1>
<st>
 General information </st>
<p>

<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.DragonFlyBSD.org/">
The DragonFly BSD Project home page</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://lists.freebsd.org/pipermail/freebsd-current/2003-July/006889.html">
Original announcement</weblink> on the FreeBSD -CURRENT mailing list</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.pkgsrc-box.org/packages/stable/DragonFly-1.10/All/">
DragonFly Packages</weblink> Master site for DragonFly's pkgsrc packages </entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.bsdinstaller.com">
DragonFly Installer</weblink></entry>
</list>
</p>

</ss1>
<ss1>
<st>
 Documentation </st>
<p>

<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://wiki.dragonflybsd.org/index.cgi/DragonFlyBSD_Handbook">
The DragonFly BSD handbook</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://leaf.dragonflybsd.org/cgi/web-man">
DragonFly On-Line Manual Pages</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://wiki.dragonflybsd.org">
The DragonFly BSD Wiki</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://yoyodyne.ath.cx/paper/dflyman">
Printable manual pages and supplementary documentation (Postscript and PDF)</weblink></entry>
</list>
</p>

</ss1>
<ss1>
<st>
 News and interviews </st>
<p>

<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.shiningsilence.com/dbsdlog/">
The DragonFly BSD Digest</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.dragonflybsd.org/status/report-2003.cgi">
2003 Year-End summary</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.slashnet.org/forums/DragonflyBSD-20031009.html">
Matthew Dillon IRC Interview</weblink> from <weblink xlink:type="simple" xlink:href="http://www.slashnet.org/">
http://www.slashnet.org/</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.osnews.com/story.php?news_id=6338">
OSNews interview</weblink> (<link xlink:type="simple" xlink:href="../198/20198.xml">
13 March</link> <link xlink:type="simple" xlink:href="../524/35524.xml">
2004</link>)</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.onlamp.com/pub/a/bsd/2004/07/08/dragonfly_bsd_interview.html">
Behind DragonFly BSD</weblink> interview with DFly developers that was published on <weblink xlink:type="simple" xlink:href="http://www.onlamp.com">
O'Reilly OnLamp.com</weblink> (<link xlink:type="simple" xlink:href="../874/15874.xml">
8 July</link> <link xlink:type="simple" xlink:href="../524/35524.xml">
2004</link>)</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.newsforge.com/article.pl?sid=04/08/02/1531233">
DragonFlyBSD 1.0A: A strong start</weblink></entry>
<entry level="1" type="bullet">

Kerner, Sean Michael&#32;(January 10, 2006).&#32;"<weblink xlink:type="simple" xlink:href="http://www.internetnews.com/dev-news/article.php/3576426">
New DragonFly Released For BSD Users</weblink>", internetnews.com.&nbsp;</entry>
<entry level="1" type="bullet">

Kerner, Sean Michael&#32;(July 25, 2006).&#32;"<weblink xlink:type="simple" xlink:href="http://www.internetnews.com/dev-news/article.php/3622406">
DragonFly BSD 1.6 Cuts the Cord</weblink>", internetnews.com.&nbsp;</entry>
</list>
</p>

</ss1>
<ss1>
<st>
 Technology references </st>
<p>

<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://people.freebsd.org/~hsu/papers/dragonflybsd.asiabsdcon04.pdf">
The DragonFly BSD Operating System</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/design-44bsd/">
The Design and Implementation of the 4.4BSD Operating System</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://citeseer.ist.psu.edu/bonwick94slab.html">
The Slab Allocator: an object-caching kernel memory allocator</weblink>  <link xlink:type="simple" xlink:href="../740/3198740.xml">
Bonwick</link>, 1994.</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.usenix.org/event/usenix01/bonwick.html">
Magazines and Vmem: Extending the Slab Allocator to Many CPUs and Arbitrary Resources</weblink> <link xlink:type="simple" xlink:href="../740/3198740.xml">
Bonwick</link> and <link>
Adams</link>, 2001.</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.lemis.com/~grog/SMPng/USENIX/paper.ascii">
Improving the FreeBSD SMP implementation</weblink> (DragonFly does things differently)</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://developer.intel.com/design/pentium/datashts/24201606.pdf">
Intel's MultiProcessor Specification</weblink> (PDF)</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://lse.sourceforge.net/locking/rcupdate.html">
Read-Copy Update Mutual Exclusion</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.trl.ibm.com/projects/security/ssp/">
The stack-smashing protector</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://gridengine.sunsource.net/">
The Grid Engine Project</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://docs.freebsd.org/44doc/papers/jail/jail.html">
FreeBSD Jails</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.bsdworld.net">
BSD News, Search Engine, Forums and Tutorials</weblink></entry>
</list>
</p>

<p>

<table style=";" class="navbox" cellspacing="0">
<row>
<col style="padding:2px;">
<table style="width:100%;background:transparent;color:inherit;;" class="nowraplinks collapsible autocollapse " cellspacing="0">
<row>
<header colspan="2" style=";" class="navbox-title">
<family wordnetid="108078020" confidence="0.8">
<link xlink:type="simple" xlink:href="../642/31642.xml">
Unix</link></family>
 and <family wordnetid="108078020" confidence="0.8">
<link xlink:type="simple" xlink:href="../815/31815.xml">
Unix-like</link></family>
 <link xlink:type="simple" xlink:href="../194/22194.xml">
operating system</link>s</header>
</row>
<row style="height:2px;">

</row>
<row>
<col colspan="2" style="width:100%;padding:0px;;;" class="navbox-list navbox-odd">
<O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../ury/22nd_century.xml">
AIX</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../622/18932622.xml">
BSD</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../229/294229.xml">
DragonFly BSD</link></O>
&nbsp;·  <platform wordnetid="103961939" confidence="0.8">
<artifact wordnetid="100021939" confidence="0.8">
<surface wordnetid="104362025" confidence="0.8">
<horizontal_surface wordnetid="103536348" confidence="0.8">
<link xlink:type="simple" xlink:href="../554/7580554.xml">
FreeBSD</link></horizontal_surface>
</surface>
</artifact>
</platform>
&nbsp;·  <link xlink:type="simple" xlink:href="../875/11875.xml">
GNU</link>&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../704/36704.xml">
HP-UX</link></O>
&nbsp;·  <link xlink:type="simple" xlink:href="../537/14537.xml">
IRIX</link>&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../297/6097297.xml">
Linux</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../980/867980.xml">
LynxOS</link></O>
&nbsp;·  <link xlink:type="simple" xlink:href="../640/20640.xml">
Mac OS X</link>&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../977/18977.xml">
MINIX</link></O>
&nbsp;·  <link xlink:type="simple" xlink:href="../495/21495.xml">
NetBSD</link>&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../571/18949571.xml">
OpenBSD</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../226/24226.xml">
Plan 9</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../184/65184.xml">
QNX</link></O>
&nbsp;·  <platform wordnetid="103961939" confidence="0.8">
<artifact wordnetid="100021939" confidence="0.8">
<surface wordnetid="104362025" confidence="0.8">
<horizontal_surface wordnetid="103536348" confidence="0.8">
<link xlink:type="simple" xlink:href="../245/2901245.xml">
Research Unix</link></horizontal_surface>
</surface>
</artifact>
</platform>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../906/1579906.xml">
SCO OpenServer</link></O>
&nbsp;·  <message wordnetid="106598915" confidence="0.8">
<information wordnetid="106634376" confidence="0.8">
<electronic_database wordnetid="106588511" confidence="0.8">
<lexical_database wordnetid="106638868" confidence="0.8">
<wordnet wordnetid="106639428" confidence="0.8">
<database wordnetid="106637824" confidence="0.8">
<link xlink:type="simple" xlink:href="../145/46145.xml">
Solaris</link></database>
</wordnet>
</lexical_database>
</electronic_database>
</information>
</message>
&nbsp;·  <link>
System V</link>&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../275/38275.xml">
Tru64</link></O>
&nbsp;·  <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../105/157105.xml">
VxWorks</link></O>
&nbsp;·  <it>
Unix variants|more''</it></col>
</row>
</table>
</col>
</row>
</table>
</p>



</ss1>
</sec>
</bdy>
</O>
</article>
