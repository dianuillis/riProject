<?xml version="1.0" encoding="UTF-8"?>
<!-- generated by CLiX/Wiki2XML [MPI-Inf, MMCI@UdS] $LastChangedRevision: 92 $ on 16.04.2009 22:13:14[mciao0827] -->
<!DOCTYPE article SYSTEM "../article.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink">
<message  confidence="0.8" wordnetid="106598915">
<protocol  confidence="0.8" wordnetid="106665108">
<direction  confidence="0.8" wordnetid="106786629">
<rule  confidence="0.8" wordnetid="106652242">
<header>
<title>Path MTU discovery</title>
<id>6018283</id>
<revision>
<id>213363267</id>
<timestamp>2008-05-19T00:22:26Z</timestamp>
<contributor>
<username>SnowFire</username>
<id>120807</id>
</contributor>
</revision>
<categories>
<category>Internet protocols</category>
<category>Computer network analysis</category>
</categories>
</header>
<bdy>

<b>Path MTU discovery</b> (<b>PMTUD</b>) is a technique in <link xlink:type="simple" xlink:href="../213/5213.xml">
computing</link> for determining the <link xlink:type="simple" xlink:href="../894/20894.xml">
maximum transmission unit</link> (MTU) size on the network path between two IP hosts with a view to avoiding <link xlink:type="simple" xlink:href="../677/323677.xml">
IP fragmentation</link>. <p>

Path MTU discovery works by setting the DF (Don't Fragment) option bit in the IP headers of outgoing packets. Then, any device along the path whose MTU is smaller than the packet will drop it, and send back an <link>
 ICMP</link> "Fragmentation Needed" message containing its MTU, allowing the source host to reduce its assumed path MTU appropriately. The process repeats until the MTU is small enough to traverse the entire path without fragmentation.</p>
<p>

If the path MTU changes after the connection is set up and is lower than the previously determined path MTU, the first large packet will cause an ICMP error and the new, lower path MTU will be found.  Conversely, if PMTUD finds that the path allows a larger MTU than what is possible on the lower link, the OS will periodically reprobe to see if the path has changed and now allows larger packets.  On <O wordnetid="106832680" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../297/6097297.xml">
Linux</link></O>
 this timer is set by default to ten minutes.</p>

<sec>
<st>
 Problems with PMTUD </st>

<p>

Many "security" devices incorrectly block all ICMP messages, including the errors that are necessary for PMTUD to work.  This can result in connections that complete the TCP three-way handshake correctly, but then hang when data is transferred.  This state is referred to as a "black hole connection".</p>
<p>

Some implementations of PMTUD now try to work around this by inferring that large payload packets have been dropped due to MTU rather than because of link congestion.  However, in order for TCP to operate most efficiently, ICMP unreachables (type 3) should be permitted.  A robust method for PMTUD that relies on TCP or some other Packetization Layer to probe the path with progressively larger packets has been standardized in RFC 4821 (Packetization Layer Path MTU Discovery, PLPMTUD).</p>
<p>

Another workaround used by some routers is to change the <link xlink:type="simple" xlink:href="../445/600445.xml">
maximum segment size</link> of all connections passing through links with MTU lower than the <link xlink:type="simple" xlink:href="../499/9499.xml">
Ethernet</link> default of 1500. This is known as MSS clamping.</p>

</sec>
<sec>
<st>
 External links </st>
<p>

<list>
<entry level="1" type="bullet">

 <link xlink:type="simple" xlink:href="../285/15285.xml">
Internet Engineering Task Force</link> <weblink xlink:type="simple" xlink:href="http://www.ietf.org/html.charters/pmtud-charter.html">
Path MTU Discovery (pmtud) Working Group</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.ietf.org/rfc/rfc1191.txt">
RFC 1191</weblink>, Path MTU Discovery</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.ietf.org/rfc/rfc1981.txt">
RFC 1981</weblink>, Path MTU Discovery for IP version 6</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.ietf.org/rfc/rfc2923.txt">
RFC 2923</weblink>, TCP Problems with Path MTU Discovery</entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.ietf.org/rfc/rfc4821.txt">
RFC 4821</weblink>,  Packetization Layer Path MTU Discovery</entry>
</list>
</p>



</sec>
</bdy>
</rule>
</direction>
</protocol>
</message>
</article>
