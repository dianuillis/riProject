<?xml version="1.0" encoding="UTF-8"?>
<!-- generated by CLiX/Wiki2XML [MPI-Inf, MMCI@UdS] $LastChangedRevision: 92 $ on 16.04.2009 17:26:43[mciao0825] -->
<!DOCTYPE article SYSTEM "../article.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink">
<header>
<title>Multihoming</title>
<id>641227</id>
<revision>
<id>239622168</id>
<timestamp>2008-09-19T18:36:57Z</timestamp>
<contributor>
<username>Pengo</username>
<id>35807</id>
</contributor>
</revision>
<categories>
<category>Internet architecture</category>
<category>Routing</category>
<category>Multihoming</category>
</categories>
</header>
<bdy>

<b>Multihoming</b> is a technique to increase the reliability of the <link xlink:type="simple" xlink:href="../754/1082754.xml">
Internet connection</link> for an <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<link xlink:type="simple" xlink:href="../323/15323.xml">
IP</link></rule>
</direction>
</protocol>
</message>
 network. As an adjective, it is typically used to describe a customer, rather than an <link xlink:type="simple" xlink:href="../245/100245.xml">
Internet service provider</link> (ISP) network.  
<sec>
<st>
 Multihoming variants </st>
<p>

There are several ways to multihome, separate from the actual protocols used to do so, amongst which the most important are:</p>
<p>

<list>
<entry level="1" type="definition">

 Single Link, Multiple IP address (Spaces): The host has multiple <link xlink:type="simple" xlink:href="../921/14921.xml">
IP address</link>es (e.g. 2001:db8::1 and 2001:db8::2 in <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<link xlink:type="simple" xlink:href="../318/15318.xml">
IPv6</link></rule>
</direction>
</protocol>
</message>
), but only one physical upstream link. When the single link fails, connectivity is down for all addresses.</entry>
</list>
</p>
<p>

<list>
<entry level="1" type="definition">

 Multiple Interfaces, Single IP address per interface: The host has multiple <link xlink:type="simple" xlink:href="../408/41408.xml">
interfaces</link> and each interface has one, or more, IP addresses.  If one of the links fails, then its IP address becomes unreachable, but the other IP addresses will still work. Hosts that have multiple AAAA or A records enabled can then still be reachable at the penalty of having the <link xlink:type="simple" xlink:href="../970/667970.xml">
client program</link> time out and retry on the broken address. Existing connections can't be taken over by the other interface, as <link xlink:type="simple" xlink:href="../538/30538.xml">
TCP</link> does not support this. To remedy this, one could use <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<standard wordnetid="107260623" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../896/404896.xml">
SCTP</link></system_of_measurement>
</rule>
</direction>
</standard>
</protocol>
</message>
 which does allow this situation. However SCTP is not used very much in practice.</entry>
</list>
</p>
<p>

<list>
<entry level="1" type="definition">

 Multiple Links, Single IP address (Space): This is what in general is meant with Multihoming. With the use of a <link xlink:type="simple" xlink:href="../059/10123059.xml">
routing protocol</link>, in most cases <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<standard wordnetid="107260623" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../893/38893.xml">
BGP</link></system_of_measurement>
</rule>
</direction>
</standard>
</protocol>
</message>
, the end-site announces this address space to its upstream links. When one of the links fails, the protocol notices this on both sides and traffic is not sent over the failing link any more. Usually this method is used to multihome a site and not for single hosts.</entry>
</list>
</p>
<p>

<list>
<entry level="1" type="definition">

 Multiple Links, Multiple IP address (Spaces): This approach uses a specialized Link Load Balancer (or WAN Load Balancer) appliance between the firewall and the link routers. No special configuration is required in the ISPâ€™s routers. It allows use of all links at the same time to increase the total available bandwidth and detects link saturation and failures in real time to redirect traffic. Algorithms allow traffic management. Incoming balancing is usually performed with a real time DNS resolution.</entry>
</list>
</p>

</sec>
<sec>
<st>
 Multihoming caveats </st>
<p>

While multihoming is generally used to eliminate network connectivity as a potential <link xlink:type="simple" xlink:href="../836/1724836.xml">
single point of failure</link> (SPOF), certain implementation caveats apply which can affect the success of such a strategy.</p>
<p>

In particular, each of the following items must be addressed in order to eliminate the network SPOF:
<list>
<entry level="1" type="bullet">

 <b>Upstream connectivity</b>:  A given network operations center must have multiple upstream links to <it>independent</it> providers. Furthermore, to lessen the possibility of simultaneous damage to all upstream links, the physical location of each of these upstream links should be <link>
physically diverse</link>: far enough apart that a piece of machinery (such as a <link xlink:type="simple" xlink:href="../577/489577.xml">
backhoe</link>) won't accidentally sever all connections at the same time.</entry>
<entry level="1" type="bullet">

 <b>Routers</b>: <link xlink:type="simple" xlink:href="../748/25748.xml">
Router</link>s and <link xlink:type="simple" xlink:href="../614/40614.xml">
switches</link> must be positioned such that no single piece of network hardware controls all network access to a given host. In particular, it is not uncommon to see multiple Internet uplinks all converge on a single edge router. In such a configuration, the loss of that single router disconnects the Internet uplink, despite the fact that multiple ISPs are otherwise in use.</entry>
<entry level="1" type="bullet">

 <b>Host connectivity</b>: A "reliable" host must be connected to the network over multiple <link xlink:type="simple" xlink:href="../408/41408.xml">
network interface</link>s, each connected to a separate router or switch. Alternatively, and preferably, the function of a given host could be duplicated across multiple computers, each of which is connected to a different router or switch.</entry>
<entry level="1" type="bullet">

 <b>Referencing Entities</b>: Not only must a host be accessible, but in many cases it must also be "referenced" to be useful. For most servers, this means in particular that the <link xlink:type="simple" xlink:href="../339/8339.xml">
name resolution</link> to that server be functional. For example, if the failure of a single element blocks users from properly resolving the DNS name of that server, then the server is effectively non-functional, despite  its otherwise connected state. </entry>
</list>
</p>
<p>

The elimination of a single point of failure is achieved only when each component that could potentially fail is  duplicated.</p>

</sec>
<sec>
<st>
 IPv4 multihoming</st>
<p>

In order to be multihomed, a network must have its own public IP address range and an <link xlink:type="simple" xlink:href="../399/312399.xml">
AS</link> number. Then a connection to two (or more) separate ISPs is established. The routing over these connections is normally controlled by a <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<standard wordnetid="107260623" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../893/38893.xml">
BGP</link></system_of_measurement>
</rule>
</direction>
</standard>
</protocol>
</message>
 enabled router.</p>
<p>

In the case where one outgoing link from the multihomed network fails, outgoing traffic will automatically be routed via one of the remaining links. More importantly, other networks will be notified, through BGP updates of the multihomed network routes, of the need to route incoming traffic via another ISP and link.  </p>
<p>

A key pitfall in multihoming is that two apparently independent links, from completely different ISPs may actually share a common transmission line and/or <link>
edge router</link>. This will form a <link xlink:type="simple" xlink:href="../836/1724836.xml">
single point of failure</link> and considerably reduce the reliability benefits from multihoming.    </p>
<p>

Another problem to look out for is that multihoming too small a network may not be effective since <link xlink:type="simple" xlink:href="../733/7469733.xml">
route filtering</link> is very common among BGP users and smaller prefixes may be filtered out. This will make multihoming fail.</p>

</sec>
<sec>
<st>
 IPv6 multihoming </st>
<p>

Multihoming in the next-generation <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<link xlink:type="simple" xlink:href="../318/15318.xml">
IPv6</link></rule>
</direction>
</protocol>
</message>
 protocol is not yet standardized, as discussions about the various possible approaches to multihoming are still unresolved.</p>

<ss1>
<st>
Current solutions</st>
<p>

<list>
<entry level="1" type="bullet">

 <link xlink:type="simple" xlink:href="../969/3957969.xml">
Provider Independent Address Space</link> has been made available in IPv6. This technique has the advantage of working like IPv4, supporting traffic balancing across multiple providers, and maintaining existing TCP and UDP sessions through cutovers.  Critics say that the increased size of <link xlink:type="simple" xlink:href="../043/48043.xml">
routing table</link>s needed to handle multi-homing in this way will overwhelm current router hardware.  Proponents say that new hardware will be able to handle the increase due to cheaper memory, which drops in price with <link xlink:type="simple" xlink:href="../418/39418.xml">
Moore's law</link>.  Proponents also say this is the only viable solution right now, and the <link xlink:type="simple" xlink:href="../321/223321.xml">
worse is better</link> philosophy supports the idea that it is better to deploy an imperfect solution now than a perfect solution after it's too late.Because many ISPs filter out route announcements with small prefixes, this will generally require a large "ISP-sized" PI allocation, such as a /32, to ensure global reachability. Using such large prefixes is an inefficient use of IPv6's address space; there are only 4 billion such /32 prefixes. However, from a pragmatic perspective, allocating a /32 is equivalent in global address space cost to allocating a single IPv4 address, and this may be acceptable if, as seems to be likely for the foreseeable future, the number of multihomed sites can be numbered only in the millions, as opposed to the many billions of non-multihomed endpoints which are anticipated to comprise the vast majority of IPv6 endpoints.</entry>
</list>
</p>

</ss1>
<ss1>
<st>
Other current possibilities</st>
<p>

<list>
<entry level="1" type="bullet">

 Automated renumbering. If one uplink goes down, all addresses in the network will be renumbered into a new /48 subnet. DNS and firewall records must be updated to redirect traffic to a different /48 subnet.  This renumbering will break live TCP and UDP sessions.</entry>
<entry level="1" type="bullet">

 Maintaining multiple simultaneous sets of host addresses, from different upstream /48's for each host, and using multiple <link>
AAAA record</link>s.  This works in most cases, but has the disadvantage that DNS and firewall records must be updated to redirect traffic to the correct set of IP addresses if one of the links goes down.  Since this also changes IP addresses on failure, it will still break live TCP and UDP sessions.</entry>
</list>
</p>

</ss1>
<ss1>
<st>
Potential future solutions</st>
<p>

<list>
<entry level="1" type="bullet">

 <link xlink:type="simple" xlink:href="../684/6335684.xml">
Site Multihoming by IPv6 Intermediation</link></entry>
<entry level="1" type="indent">

 Con: Operators don't believe in it</entry>
<entry level="1" type="indent">

 Con: Multihoming configured on host stack, no support for middleboxes (firewalls, proxies)</entry>
<entry level="1" type="bullet">

 <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<link xlink:type="simple" xlink:href="../407/1483407.xml">
Host Identity Protocol</link></rule>
</direction>
</protocol>
</message>
</entry>
<entry level="1" type="indent">

 Con: Not deployed</entry>
<entry level="1" type="indent">

 Con: All applications need to support it</entry>
<entry level="1" type="indent">

 Pro: Free certificates</entry>
<entry level="1" type="bullet">

 <message wordnetid="106598915" confidence="0.8">
<protocol wordnetid="106665108" confidence="0.8">
<standard wordnetid="107260623" confidence="0.8">
<direction wordnetid="106786629" confidence="0.8">
<rule wordnetid="106652242" confidence="0.8">
<system_of_measurement wordnetid="113577171" confidence="0.8">
<link xlink:type="simple" xlink:href="../896/404896.xml">
Stream Control Transmission Protocol</link></system_of_measurement>
</rule>
</direction>
</standard>
</protocol>
</message>
</entry>
<entry level="1" type="indent">

 Con: Not deployed</entry>
<entry level="1" type="indent">

 Con: Not TCP/IP</entry>
<entry level="1" type="indent">

 Con: All applications need to support it</entry>
</list>
</p>

</ss1>
</sec>
<sec>
<st>
External links</st>
<p>

IPv4 multihoming:
<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.oreillynet.com/pub/a/network/2002/08/12/multihoming.html">
O'Reilly article on BGP Multihoming</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.cisco.com/en/US/tech/tk365/technologies_configuration_example09186a008009456d.shtml">
Cisco multihoming configuration example</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://tetro.net/misc/multilink.html">
Linux Multihoming configuration example</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.uit.co.uk/practical-tcpip/w-ipaliasw.pdf">
Windows Multihoming example for Single Link, Multiple IP address</weblink></entry>
</list>
</p>
<p>

IPv6 multihoming:
<list>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.astrocorp.com/redundancy/index.html">
Astrocom article on multihoming</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://ops.ietf.org/multi6/">
Old IETF IPv6 multihoming working group</weblink></entry>
<entry level="1" type="bullet">

 <weblink xlink:type="simple" xlink:href="http://www.ietf.org/html.charters/shim6-charter.html">
Current IETF IPv6 multihoming working group</weblink></entry>
<entry level="1" type="bullet">

 Internet-Draft: <weblink xlink:type="simple" xlink:href="http://www.consulintel.euro6ix.org/ietf/draft-palet-multi6-scenarios-00.txt">
Analysis of IPv6 Multihoming Scenarios</weblink></entry>
</list>
</p>


</sec>
</bdy>
</article>
