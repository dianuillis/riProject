<?xml version="1.0" encoding="UTF-8"?>
<!-- generated by CLiX/Wiki2XML [MPI-Inf, MMCI@UdS] $LastChangedRevision: 92 $ on 16.04.2009 22:43:21[mciao0828] -->
<!DOCTYPE article SYSTEM "../article.dtd">
<article xmlns:xlink="http://www.w3.org/1999/xlink">
<header>
<title>Ed2k URI scheme</title>
<id>7363424</id>
<revision>
<id>241287261</id>
<timestamp>2008-09-27T08:15:20Z</timestamp>
<contributor>
<username>Commander Keane</username>
<id>169380</id>
</contributor>
</revision>
<categories>
<category>File sharing</category>
</categories>
</header>
<bdy>
<p>

In computing, <b>ed2k links</b> are <link xlink:type="simple" xlink:href="../547/49547.xml">
hyperlink</link>s used to denote files stored within the <link xlink:type="simple" xlink:href="../283/1755283.xml">
eDonkey</link> <link xlink:type="simple" xlink:href="../107/24107.xml">
P2P</link> <link>
network</link>.  Many programs, such as <link xlink:type="simple" xlink:href="../787/144787.xml">
eDonkey2000</link>, <link xlink:type="simple" xlink:href="../202/5464202.xml">
eMule</link>, Hybrid, MLDonkey, and others using the eDonkey file sharing protocol, may be used to manage files stored in the the file sharing network.</p>
<p>

ed2k links allow the file to be identified in a browser and transferred to eMule, eDonkey2000 or other compatible software.  This linking feature was one of the first to be introduced in <link xlink:type="simple" xlink:href="../107/24107.xml">
peer to peer</link> file sharing.  Now <link xlink:type="simple" xlink:href="../921/1427921.xml">
Magnet links</link> serves a similar role but is not limited to the ed2k hash but can be other hashes such as <link xlink:type="simple" xlink:href="../672/26672.xml">
SHA</link> or <function wordnetid="113783816" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../826/18826.xml">
MD5</link></function>
 etc.</p>
<p>

These hash codes are primarily used to ensure that identical files have the same <link xlink:type="simple" xlink:href="../411/3444411.xml">
unique identifier</link> on the network, even if held at different locations or given different names. This is done by using a <link xlink:type="simple" xlink:href="../790/13790.xml">
hash function</link> on the file to calculate its checksum.</p>
<p>

Like other URI protocols web browsers can be configured to automatically handle ed2k URIs.  After installing an <link xlink:type="simple" xlink:href="../644/6853644.xml">
ed2k client</link>, the ed2k:// protocol is optionally registered so that clicking on it in the browser automatically starts the download.</p>

<sec>
<st>
File link format</st>

<p>

The typical ed2k link also includes the <link xlink:type="simple" xlink:href="../542/351542.xml">
filename</link> and the filesize. An example (a link to the 15Mb <link xlink:type="simple" xlink:href="../294/15052294.xml">
Purist Edit</link> trailer) is provided below:</p>
<p>

<b>ed2k://|file|The_Two_Towers-The_Purist_Edit-Trailer.avi|14997504|965c013e991ee246d63d45ea71954c4d|/</b></p>
<p>

The ed2k links can also include a reference to the IP address and port of the specific client that shares a file. This is done by adding a list of sources after the main part of the link:</p>
<p>

<b>ed2k://|file|The_Two_Towers-The_Purist_Edit-Trailer.avi|14997504|965c013e991ee246d63d45ea71954c4d|/|sources,202.89.123.6:4662|/</b></p>
<p>

The "file" part indicates that this is a file link, as opposed to a server link.</p>
<p>

On eMule, the link often contains also an AICH <mathematical_relation wordnetid="113783581" confidence="0.8">
<function wordnetid="113783816" confidence="0.8">
<link xlink:type="simple" xlink:href="../388/2497388.xml">
top hash</link></function>
</mathematical_relation>
 <b>|h==H52BRVWPBBTAED5NXQDH2RJDDAKRUWST|</b> to help recover the file in case of corruption during file transfer.</p>

</sec>
<sec>
<st>
ed2k hash algorithm</st>

<p>

The ed2k hash function is a <function wordnetid="113783816" confidence="0.9508927676800064">
<link xlink:type="simple" xlink:href="../106/578106.xml">
MD4</link></function>
 root hash of an MD4 <link xlink:type="simple" xlink:href="../149/2497149.xml">
hash list</link>, and gives a <b>different</b> result than simply MD4:</p>
<p>

The file data is divided into full <it>chunks</it> of 9500 <link xlink:type="simple" xlink:href="../755/149755.xml">
KiB</link> (9728000 bytes or nearly 9.28 MB) plus a remainder chunk, and a separate <b>128-bit MD4 checksum</b> is computed for each. If the file length is an exact multiple of 9500 KiB, the remainder zero size chunk is still used at the end of the hash list. The ed2k hash is computed by concatenating the chunks' MD4 checksums in order and hashing the result using MD4. Although, if the file is composed of a single non-full chunk, its MD4 hash is used with no further modifications.<ref xlink:type="simple" xlink:href="#xpointer(//reflist/entry[@id=%221%22])">1</ref></p>
<p>

This method of hashing allows the recipient to verify that a hash list corresponds to the original ed2k file hash, without the need to have the data blocks.</p>
<p>

It should be noted that what to do when a file ends on a full chunk is undefined.  This means that the final hash of a file which is a multiple of 9728000 bytes in size may be computed one of two ways: using the existing MD4 chunk hashes, or using the existing MD4 hashes plus the MD4 hash of an all-zeros chunk.  Some programs use one method or the other, and a few use both.  So, two different ed2k hashes may be produced for the same file in different programs if the file is a multiple of 9728000 bytes in size.</p>

</sec>
<sec>
<st>
 Server links </st>
<p>

A server link is a reference to an eDonkey2000 server; clicking on such a link typically adds it to the server list:</p>
<p>

They have the following format:</p>
<p>

<it>ed2k://|server|IP|PORT|/</it></p>
<p>

<list>
<entry level="1" type="bullet">

IP -&amp;gt; IP of the server to connect to.</entry>
<entry level="1" type="bullet">

PORT -&amp;gt; Port where the server is listening for incoming eD2k connections</entry>
</list>
</p>
<p>

example:</p>
<p>

<b>ed2k://|server|207.44.222.51|4242|/</b></p>

</sec>
<sec>
<st>
 References </st>
<p>

<reflist>
<entry id="1">
emule source, method CKnownFile::CreateFromFile.</entry>
</reflist>
</p>

</sec>
<sec>
<st>
 External links </st>
<p>
 
<list>
<entry level="1" type="bullet">

<weblink xlink:type="simple" xlink:href="http://sharethefiles.com">
ShareTheFiles</weblink> Example of a large eD2k link indexing website. </entry>
<entry level="1" type="bullet">

<weblink xlink:type="simple" xlink:href="http://forum.emule-project.net/index.php?showtopic=46944">
emule forum guides</weblink> How to remove the ed2k link protocol association in windows. </entry>
<entry level="1" type="bullet">

<weblink xlink:type="simple" xlink:href="http://www.amule.org/wiki/index.php/Ed2k_link">
aMule wiki: ed2k link</weblink>.</entry>
<entry level="1" type="bullet">

<weblink xlink:type="simple" xlink:href="http://www.emule-project.net/home/perl/help.cgi?l=1&amp;rm=show_topic&amp;topic_id=422">
emule project</weblink> Ed2k link formats supported by emule client.</entry>
<entry level="1" type="bullet">

<weblink xlink:type="simple" xlink:href="http://ed2k-tools.sourceforge.net/ed2k_hash.shtml">
ED2K tools - ED2K_Hash</weblink>  Tool to create ED2K hashes.</entry>
</list>
</p>
<p>

<table style=";" class="navbox" cellspacing="0">
<row>
<col style="padding:2px;">
<table style="width:100%;background:transparent;color:inherit;;" class="nowraplinks collapsible autocollapse " cellspacing="0">
<row>
<header colspan="2" style=";" class="navbox-title">
<link xlink:type="simple" xlink:href="../915/2767915.xml">
URI scheme</link></header>
</row>
<row style="height:2px;">

</row>
<row>
<col style=";;" class="navbox-group">
Official</col>
<col style="text-align:left;border-left:2px solid #fdfdfd;width:100%;padding:0px;;;" class="navbox-list navbox-odd">
&nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  <link xlink:type="simple" xlink:href="../927/2542927.xml">
crid</link>:&nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  <link xlink:type="simple" xlink:href="../826/10826.xml">
fax</link>:&nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  </col>
</row>
<row style="height:2px">

</row>
<row>
<col style=";;" class="navbox-group">
Unofficial</col>
<col style="text-align:left;border-left:2px solid #fdfdfd;width:100%;padding:0px;;;" class="navbox-list navbox-even">
&nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  &nbsp;·  </col>
</row>
</table>
</col>
</row>
</table>
</p>



</sec>
</bdy>
</article>
